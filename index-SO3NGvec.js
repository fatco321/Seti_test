import{b as m,o as r,e as _,f as a,g as J,j as W,k as F,l as B,r as le,w as G,m as E,q as f,t as v,u as D,v as w,F as L,x as ee,y as b,z as O,c as se,A as re,T as H,B as oe,C as ie}from"./@vue-C_9op_kl.js";import{R as U,u as ue,a as de,c as ce,b as fe,d as ve}from"./vue-router-C6nQOR4Z.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();const q=(n,e)=>{const t=n.__vccOpts||n;for(const[s,o]of e)t[s]=o;return t},_e={class:"tooltip-container"},he={__name:"Tooltip",props:{position:{type:String,default:"bottom",validator:n=>["top","bottom","left","right"].includes(n)},offset:{type:Number,default:8}},setup(n){const e=n,t=m(!1),s=m({}),o=i=>{t.value=!0;const p=i.target.getBoundingClientRect(),u={position:"fixed"};switch(e.position){case"top":u.top=`${p.top-e.offset}px`,u.left=`${p.left+p.width/2}px`,u.transform="translate(-50%, -100%)";break;case"bottom":u.top=`${p.bottom+e.offset}px`,u.left=`${p.left+p.width/2}px`,u.transform="translate(-50%, 0)";break;case"left":u.top=`${p.top+p.height/2}px`,u.left=`${p.left-e.offset}px`,u.transform="translate(-100%, -50%)";break;case"right":u.top=`${p.top+p.height/2}px`,u.left=`${p.right+e.offset}px`,u.transform="translate(0, -50%)";break}s.value=u},l=()=>{t.value=!1};return(i,p)=>(r(),_("div",_e,[a("div",{class:"tooltip-trigger",onMouseenter:o,onMouseleave:l},[J(i.$slots,"trigger",{},void 0)],32),t.value?(r(),_("div",{key:0,class:"tooltip",style:W(s.value)},[a("div",{class:F(["tooltip-arrow",`arrow-${e.position}`])},null,2),J(i.$slots,"content",{},void 0)],4)):B("",!0)]))}},j=q(he,[["__scopeId","data-v-24f245dc"]]),me={__name:"ButtonMenu",props:{fontSize:{type:String,default:"1em"},disabled:{type:Boolean,default:!1},width:{type:String,default:"45vw"}},setup(n){const e=n;return(t,s)=>(r(),_("button",{style:W({fontSize:e.fontSize,width:e.width})},[J(t.$slots,"default",{},void 0)],4))}},I=q(me,[["__scopeId","data-v-dd25778f"]]),ge={class:"toggle-switch"},pe=["checked"],ye={__name:"ToggleSwitch",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(n){return(e,t)=>(r(),_("label",ge,[a("input",{type:"checkbox",checked:n.modelValue,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.checked))},null,40,pe),t[1]||(t[1]=a("span",{class:"slider"},null,-1))]))}},we=q(ye,[["__scopeId","data-v-30aa1dbe"]]);class Ce{constructor(e,t){this.dbName=e,this.storeName=t,this.db=null}async open(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName,1);s.onupgradeneeded=o=>{const l=o.target.result;l.objectStoreNames.contains(this.storeName)||l.createObjectStore(this.storeName,{keyPath:"id"})},s.onsuccess=o=>{this.db=o.target.result,e(this.db)},s.onerror=o=>{t(o.target.error)}})}async getAll(){return new Promise((e,t)=>{const l=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName).getAll();l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)})}async getById(e){return new Promise((t,s)=>{const i=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName).get(e);i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}async save(e){return new Promise((t,s)=>{const o=this.db.transaction(this.storeName,"readwrite"),l=o.objectStore(this.storeName);e.forEach(i=>{l.put(i)}),o.oncomplete=()=>t(),o.onerror=()=>s(o.error)})}async delete(e){const t=this.db.transaction(this.storeName,"readwrite"),s=t.objectStore(this.storeName);e.forEach(o=>s.delete(o)),await t.complete}async clear(){return new Promise((e,t)=>{const l=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();l.onsuccess=()=>e(),l.onerror=()=>t(l.error)})}}function te(n){const{isCorrect:e,userAlreadyAnswer:t,...s}=n;return s}const R=new Ce("QuizDB","questions");function ke(n,e){const t=localStorage.getItem(n);return t!==null?JSON.parse(t):e}function Ae(n,e){localStorage.setItem(n,JSON.stringify(e))}const x=le({data:[],_isHightVoltage:ke("isHightVoltage",!1),get isHightVoltage(){return this._isHightVoltage},set isHightVoltage(n){this._isHightVoltage=n,Ae("isHightVoltage",n)},async loadData(){const n=Date.now();try{await R.open();const s=await fetch("./data.json");if(!s.ok)throw new Error("Network response was not ok");let l=(await s.json()).data;if(this.isHightVoltage){const C=await R.getAll(),k=l.filter(h=>h.voltage&&!C.some(N=>N.id===h.id));if(k.length>0){const h=k.map(N=>({...N,isCorrect:!1,userAlreadyAnswer:!1}));await R.save(h),console.log("Added items with voltage:",h)}}else{const k=(await R.getAll()).filter(h=>h.voltage);k.length>0&&(await R.delete(k.map(h=>h.id)),console.log("Removed items with voltage:",k)),l=l.filter(h=>!h.voltage)}const i=l.map(C=>({...C,isCorrect:!1,userAlreadyAnswer:!1})),p=await R.getAll(),u=[];i.forEach(C=>{const k=p.find(h=>h.id===C.id);(!k||JSON.stringify(te(k))!==JSON.stringify(te(C)))&&u.push(C)}),u.length>0&&(await R.save(u),console.log("Updated items:",u)),this.data=await R.getAll()}catch(s){console.error("Failed to load or update data:",s)}const t=Date.now()-n;console.log(`loadData failed after ${t} ms`)},async getQuestionById(n){try{return await R.open(),await R.getById(n)}catch(e){return console.error("Failed to get question by id:",e),null}},async updateQuestion(n,e){try{await R.open();const t=await R.getById(n);if(t){const s=JSON.parse(JSON.stringify(e)),l={...JSON.parse(JSON.stringify(t)),...s};await R.save([l])}else console.error("Question not found")}catch(t){console.error("Failed to update question:",t)}},async reloadAndReplaceData(){try{await R.open();const n=await fetch("./data.json");if(!n.ok)throw new Error("Network response was not ok");let t=(await n.json()).data;this.isHightVoltage||(t=t.filter(o=>!o.voltage));const s=t.map(o=>({...o,isCorrect:!1,userAlreadyAnswer:!1}));await R.clear(),await R.save(s),this.data=s,console.log("Данные успешно перезаписаны.")}catch(n){console.error("Ошибка при перезаписи данных:",n)}}});G(()=>x.isHightVoltage,async n=>{await x.loadData()},{immediate:!0});const $e={key:0,class:"loading-screen"},be={key:1,class:"container"},xe={class:"voltage"},Se={__name:"MenuPage",setup(n){const e=m(!0);return E(async()=>{try{await x.loadData(),e.value=!1}catch(t){console.error("Ошибка при загрузке данных:",t),e.value=!1}}),(t,s)=>e.value?(r(),_("div",$e,s[1]||(s[1]=[a("div",{class:"spinner"},null,-1),a("p",null,"Загрузка данных...",-1)]))):(r(),_("div",be,[f(j,{position:"bottom"},{trigger:v(()=>[f(D(U),{to:"/exam/"},{default:v(()=>[f(I,null,{default:v(()=>s[2]||(s[2]=[w(" ЭКЗАМЕН ")])),_:1})]),_:1})]),content:v(()=>s[3]||(s[3]=[w(" Сдайте экзамен из десяти вопросов")])),_:1}),f(j,{position:"bottom"},{trigger:v(()=>[f(D(U),{to:"theme"},{default:v(()=>[f(I,null,{default:v(()=>s[4]||(s[4]=[w("ТРЕНИРОВКА ПО ТЕМАМ")])),_:1})]),_:1})]),content:v(()=>s[5]||(s[5]=[w(" Выбирайте темы для тренировки из списка")])),_:1}),f(j,{position:"top"},{trigger:v(()=>[f(D(U),{to:"/marathon"},{default:v(()=>[f(I,null,{default:v(()=>s[6]||(s[6]=[w(" МАРАФОН ")])),_:1})]),_:1})]),content:v(()=>s[7]||(s[7]=[w(" Отвечайте на вопросы до первой ошибки")])),_:1}),f(j,{position:"top"},{trigger:v(()=>[f(D(U),{to:"/mistake"},{default:v(()=>[f(I,null,{default:v(()=>s[8]||(s[8]=[w("РАБОТА НАД ОШИБКАМИ")])),_:1})]),_:1})]),content:v(()=>s[9]||(s[9]=[w("Выполняйте работу над ошибками")])),_:1}),f(j,{position:"top"},{trigger:v(()=>[f(D(U),{to:"/statistic"},{default:v(()=>[f(I,null,{default:v(()=>s[10]||(s[10]=[w("СТАТИСТИКА")])),_:1})]),_:1})]),content:v(()=>s[11]||(s[11]=[w(" Смотрите собственную статистику ответов на вопросы")])),_:1}),a("div",xe,[a("div",{class:F([{scale:!D(x).isHightVoltage},"voltage-text"])}," До 1000В ",2),a("div",null,[f(we,{modelValue:D(x).isHightVoltage,"onUpdate:modelValue":s[0]||(s[0]=o=>D(x).isHightVoltage=o)},null,8,["modelValue"])]),a("div",{class:F([{scale:D(x).isHightVoltage},"voltage-text"])}," Свыше 1000В ",2)])]))}},Ne=q(Se,[["__scopeId","data-v-52f50be4"]]),qe={class:"container"},Re={key:0},Te=["value","checked","disabled","onChange"],Be={style:{"white-space":"pre-line"}},Ve={key:1},De=["value","checked","disabled","onChange"],Ie={style:{"white-space":"pre-line"}},He={__name:"Answer",props:{answerArr:{type:Array,required:!0},isRadio:{type:Boolean,required:!0},isConfirm:{type:Boolean,required:!1}},emits:["userSelect"],setup(n,{emit:e}){const t=n,s=e,o=m(!1),l=m(null),i=m([]);G(()=>t.answerArr,()=>{l.value=null,i.value=[],o.value=!1}),G(()=>t.isConfirm,C=>{C!==!1&&(o.value=!0,l.value!==null&&s("userSelect",l.value),i.value.length>0&&s("userSelect",i.value))});const p=C=>{l.value=C},u=C=>{i.value.includes(C)?i.value=i.value.filter(k=>k!==C):i.value.push(C)};return(C,k)=>(r(),_("div",qe,[n.isRadio?(r(),_("div",Re,[(r(!0),_(L,null,ee(n.answerArr,h=>(r(),_("label",{key:h,class:"form-control"},[a("input",{type:"radio",name:"radio",value:h,checked:l.value===h,disabled:o.value,onChange:N=>p(h)},null,40,Te),a("span",Be,b(h),1)]))),128))])):(r(),_("div",Ve,[(r(!0),_(L,null,ee(n.answerArr,h=>(r(),_("label",{key:h,class:"form-control"},[a("input",{type:"checkbox",name:"checkbox",value:h,checked:i.value.includes(h),disabled:o.value,onChange:N=>u(h)},null,40,De),a("span",Ie,b(h),1)]))),128))]))]))}},K=q(He,[["__scopeId","data-v-539d8d06"]]),Me=["disabled"],Oe={__name:"Button",props:{backgroundColor:{type:String,default:"#42b983"},fontSize:{type:String,default:"1em"},hoverBackgroundColor:{type:String,default:"#369f6e"},disabled:{type:Boolean,default:!1}},setup(n){const e=n,t=m(!1),s=()=>{e.disabled||(t.value=!0)},o=()=>{e.disabled||(t.value=!1)};return(l,i)=>(r(),_("button",{style:W({backgroundColor:t.value?e.hoverBackgroundColor:e.backgroundColor,fontSize:e.fontSize}),onMouseenter:s,onMouseleave:o,disabled:e.disabled},[J(l.$slots,"default",{},void 0)],44,Me))}},V=q(Oe,[["__scopeId","data-v-729f0bc0"]]),Qe={class:"container"},Ue={class:"container__count"},Pe={class:"container__count_good"},Ee={key:0,class:"container__count_fail"},je={class:"container__btns"},Je={__name:"Result",props:{isExam:{type:Boolean,default:!1},goodCount:{type:Number,required:!0},failCount:{type:Number,required:!0},isMarathon:{type:Boolean,default:!1}},setup(n){return(e,t)=>(r(),_("div",Qe,[t[5]||(t[5]=a("div",{class:"container__head"},[a("h2",null,"Результат")],-1)),a("div",Ue,[a("div",Pe,[t[0]||(t[0]=a("span",null,"Правильных ответов:",-1)),t[1]||(t[1]=w()),a("span",null,b(n.goodCount),1)]),n.isMarathon?B("",!0):(r(),_("div",Ee,[t[2]||(t[2]=a("span",null,"Неправильных ответов: ",-1)),a("span",null,b(n.failCount),1)]))]),a("div",je,[n.isExam?(r(),O(I,{key:0},{default:v(()=>t[3]||(t[3]=[w("Скачать протокол")])),_:1})):B("",!0),f(D(U),{to:"/"},{default:v(()=>[f(I,null,{default:v(()=>t[4]||(t[4]=[w(" Вернуться в меню ")])),_:1})]),_:1})])]))}},X=q(Je,[["__scopeId","data-v-dae940e5"]]),Le={class:"progress-bar"},ze={key:0,class:"progress-bar__text"},Fe={__name:"ProgressBar",props:{index:{type:Number,required:!0},total:{type:Number,required:!0},isShowTotal:{type:Boolean,default:!1}},setup(n){const e=n,t=se(()=>`${(e.index+1)/e.total*100}%`);return(s,o)=>(r(),_("div",Le,[a("div",{class:"progress-bar__fill",style:W({width:t.value})},null,4),n.isShowTotal?(r(),_("div",ze,b(n.index+1)+" / "+b(n.total),1)):B("",!0)]))}},Y=q(Fe,[["__scopeId","data-v-e4525cff"]]),Ge={key:0},We={key:0,class:"container"},Ke={class:"container__progress-bar"},Xe={class:"container__exam-answers"},Ye={key:0,class:"navigation-buttons"},Ze={key:1},et={__name:"ExamPage",setup(n){const e=m([]),t=m(!1),s=m(null),o=m(!1);se(()=>o?new Date:null);const l=y=>{for(let d=y.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[y[d],y[c]]=[y[c],y[d]]}},i=y=>{const d=new Set,c=x.data.slice(),A=Array.from(new Set(c.map(g=>g.theme)));for(y>c.length&&(y=c.length);d.size<y&&A.length>0;){const g=Math.floor(Math.random()*A.length),M=A[g],Q=c.filter(P=>P.theme===M);if(Q.length>0){const P=Math.floor(Math.random()*Q.length),z=Q.splice(P,1)[0];d.add(z),Q.length===0&&A.splice(g,1)}if(A.length===0&&d.size<y){const P=c.filter(Z=>!d.has(Z));Array.from(P).slice(0,y-d.size).forEach(Z=>d.add(Z))}}const S=Array.from(d);return l(S),S};G(()=>x.data,y=>{y.length>0&&(e.value=i(10))},{immediate:!0});const p=(y,d)=>{if(y.length!==d.length)return!1;const c=y.slice().sort(),A=d.slice().sort();return c.every((S,g)=>S===A[g])},u=m(0),C=m(!1),k=async y=>{let d=!1;t.value=!1,Array.isArray(y)||(d=y===e.value[u.value].correctAnswer[0]),Array.isArray(y)&&(d=p(y,e.value[u.value].correctAnswer)),e.value[u.value].isCorrect=d;const c=JSON.parse(JSON.stringify({isCorrect:d,userAlreadyAnswer:!0}));await x.updateQuestion(e.value[u.value].id,c),C.value=!0},h=()=>{t.value=!0},N=()=>{C.value=!1,T.value=!1,u.value<e.value.length-1&&(u.value+=1)},T=m(!1);re(()=>{s.value=new Date});const $=()=>{o.value=!0};return(y,d)=>(r(),O(H,{mode:"out-in"},{default:v(()=>[o.value?(r(),_("div",Ze,[f(X,{goodCount:e.value.filter(c=>c.isCorrect).length,failCount:e.value.filter(c=>!c.isCorrect).length,isExam:!0},null,8,["goodCount","failCount"])])):(r(),_("div",Ge,[e.value.length>0?(r(),_("div",We,[a("div",Ke,[f(Y,{index:u.value,total:e.value.length,isShowTotal:!0},null,8,["index","total"])]),f(H,{name:"slide",mode:"out-in"},{default:v(()=>[(r(),_("div",{key:u.value,class:"container__exam"},[a("h3",null,"id: "+b(e.value[u.value].id)+" "+b(e.value[u.value].question),1),a("div",Xe,[f(K,{onChange:d[0]||(d[0]=c=>T.value=!0),answerArr:e.value[u.value].answers,isRadio:e.value[u.value].correctAnswer.length===1,isConfirm:t.value,onUserSelect:k},null,8,["answerArr","isRadio","isConfirm"])]),T.value?(r(),_("div",Ye,[f(H,{mode:"out-in"},{default:v(()=>[C.value?u.value!==e.value.length-1?(r(),O(V,{key:1,onClick:N},{default:v(()=>d[2]||(d[2]=[w(" Следующий вопрос ")])),_:1})):(r(),O(V,{key:2,onClick:$},{default:v(()=>d[3]||(d[3]=[w("Результат")])),_:1})):(r(),O(V,{key:0,onClick:h},{default:v(()=>d[1]||(d[1]=[w(" Подтвердить выбор ")])),_:1}))]),_:1})])):B("",!0)]))]),_:1})])):B("",!0)]))]),_:1}))}},tt=q(et,[["__scopeId","data-v-e6434b4b"]]),st={key:0,class:"container"},ot={class:"container__progress-bar"},nt={class:"container__question"},at={class:"container__exam-answers"},lt={key:0,class:"container__btn"},rt={key:1,class:"container__result"},it={__name:"MarathonPage",setup(n){const e=m(null),t=m(0),s=m(0),o=m(0),l=m(!1),i=m([]),p=m(!1);E(()=>{e.value=x.data,e.value=u(e.value)});function u(d){return d.sort(()=>Math.random()-.5)}const C=d=>{if(e.value[t.value].correctAnswer.length>1){const c=d.target,A=c.value;c.checked?i.value.push(A):i.value=i.value.filter(S=>S!==A);return}l.value=!0},k=d=>{l.value=!1,h(d),$()},h=d=>{const c=e.value[t.value].correctAnswer[0]===d;c?s.value+=1:o.value+=1,y(c)},N=()=>{const d=T(e.value[t.value].correctAnswer,i.value);d?s.value+=1:o.value+=1,y(d),$()},T=(d,c)=>{if(d.length!==c.length)return!1;const A=d.slice().sort(),S=c.slice().sort();return A.every((g,M)=>g===S[M])},$=()=>{t.value<e.value.length-1?setTimeout(()=>{t.value+=1,i.value=[]},500):p.value=!0},y=async d=>{const c=e.value[t.value].id,A=JSON.parse(JSON.stringify({isCorrect:d,userAlreadyAnswer:!0}));await x.updateQuestion(c,A)};return(d,c)=>(r(),O(H,{mode:"out-in"},{default:v(()=>[o.value===0&!p.value?(r(),_("div",st,[a("div",ot,[f(Y,{index:t.value,total:e.value.length},null,8,["index","total"])]),f(H,{name:"slide",mode:"out-in"},{default:v(()=>[(r(),_("div",{key:t.value,class:"container__exam"},[a("div",nt,[a("h3",null,b(e.value[t.value].question),1)]),a("div",at,[f(K,{answerArr:e.value[t.value].answers,isRadio:e.value[t.value].correctAnswer.length===1,onChange:C,onUserSelect:k,isConfirm:l.value},null,8,["answerArr","isRadio","isConfirm"])]),e.value[t.value].correctAnswer.length>1?(r(),_("div",lt,[f(V,{onClick:N},{default:v(()=>c[0]||(c[0]=[w("Подтвердить")])),_:1})])):B("",!0)]))]),_:1})])):(r(),_("div",rt,[f(X,{isMarathon:!0,failCount:o.value,goodCount:s.value},null,8,["failCount","goodCount"])]))]),_:1}))}},ut=q(it,[["__scopeId","data-v-7cf595c6"]]),dt={key:0,class:"confirm-dialog"},ct={class:"btns"},ft={__name:"ConfirmDialog",props:["isVisible","title","message"],emits:["confirm","cancel"],setup(n){return(e,t)=>n.isVisible?(r(),_("div",dt,[a("h3",null,b(n.title),1),a("p",null,b(n.message),1),a("div",ct,[f(V,{onClick:t[0]||(t[0]=s=>e.$emit("confirm"))},{default:v(()=>t[2]||(t[2]=[w("Да")])),_:1}),f(V,{backgroundColor:"red",hoverBackgroundColor:"#c70000",onClick:t[1]||(t[1]=s=>e.$emit("cancel"))},{default:v(()=>t[3]||(t[3]=[w("Нет")])),_:1})])])):B("",!0)}},vt=q(ft,[["__scopeId","data-v-9e3f918f"]]),_t={class:"container"},ht={class:"container__info"},mt={class:"container__info good"},gt={class:"container__info fail"},pt={class:"container__info theme"},yt={class:"container__btns"},wt={__name:"StatisticPage",setup(n){const e=m(0),t=m(0),s=m(0),o=m(0),l=m("");function i(){const k=x.data;t.value=k.length,e.value=k.filter($=>$.userAlreadyAnswer===!0).length,s.value=k.filter($=>$.userAlreadyAnswer===!0&&$.isCorrect===!1).length,o.value=k.filter($=>$.userAlreadyAnswer===!0&&$.isCorrect===!0).length;const h=k.reduce(($,y)=>(y.userAlreadyAnswer&&($[y.theme]||($[y.theme]={total:0,fail:0}),$[y.theme].total++,y.isCorrect||$[y.theme].fail++),$),{});let N="",T=0;for(const[$,y]of Object.entries(h)){const d=y.fail/y.total;d>T&&(T=d,N=$)}l.value=N}E(()=>{i()});const p=m(!1);async function u(){p.value=!1,await x.reloadAndReplaceData(),i()}function C(){p.value=!1}return(k,h)=>{const N=oe("RouterLink");return r(),_(L,null,[a("div",_t,[h[5]||(h[5]=a("div",{class:"container__head"},[a("h2",null,"Статистика")],-1)),a("div",ht," Вы ответили на: "+b(e.value)+" из "+b(t.value)+" вопросов ",1),a("div",mt,"Правильных ответов: "+b(o.value),1),a("div",gt," Неправильный ответов: "+b(s.value),1),a("div",pt,[h[1]||(h[1]=w(" Ваша самая слабая тема: ")),h[2]||(h[2]=a("br",null,null,-1)),w(" "+b(l.value),1)]),a("div",yt,[f(N,{to:"/"},{default:v(()=>[f(I,{width:"30vw"},{default:v(()=>h[3]||(h[3]=[w(" Вернуться в меню ")])),_:1})]),_:1}),f(I,{onClick:h[0]||(h[0]=T=>p.value=!0),width:"27vw","font-size":"0.8em"},{default:v(()=>h[4]||(h[4]=[w(" Сбросить статистику ")])),_:1})])]),f(vt,{isVisible:p.value,title:"Вы уверены?",message:"Это приведет к потери прогресса",onConfirm:u,onCancel:C},null,8,["isVisible"])],64)}}},Ct=q(wt,[["__scopeId","data-v-73332202"]]),kt={};function At(n,e){return r(),_("button",null,[J(n.$slots,"default",{},void 0)])}const ne=q(kt,[["render",At],["__scopeId","data-v-2cf7f4ea"]]),$t={key:0,class:"container"},bt={class:"container__hit"},xt={__name:"Hit",props:{hit:{type:String,required:!0},showHit:{type:Boolean,required:!0}},setup(n){return(e,t)=>(r(),O(H,{mode:"out-in"},{default:v(()=>[n.showHit?(r(),_("div",$t,[a("div",bt,b(n.hit),1)])):B("",!0)]),_:1}))}},ae=q(xt,[["__scopeId","data-v-83d0fd83"]]),St={key:0},Nt={key:0},qt={key:0,class:"container"},Rt={class:"container__progress-bar"},Tt={class:"container__exam-answers"},Bt={key:0,class:"container__hit"},Vt={class:"container__hit-msg"},Dt={key:0,class:"good"},It={key:1,class:"fail"},Ht={key:1,class:"navigation-buttons"},Mt={key:1,class:"btns_next_menu"},Ot={class:"container__hit"},Qt={key:1},Ut={key:1},Pt={class:"container__empty"},Et={__name:"MistakePage",setup(n){const e=m([]),t=m(!1),s=m(!1),o=m(null),l=m(!1),i=m(!1);E(()=>{e.value=x.data.filter(d=>d.isCorrect===!1&&d.userAlreadyAnswer===!0)});const p=(d,c)=>{if(d.length!==c.length)return!1;const A=d.slice().sort(),S=c.slice().sort();return A.every((g,M)=>g===S[M])},u=m(0),C=m(!1),k=async d=>{let c=!1;t.value=!1,Array.isArray(d)||(c=d===e.value[u.value].correctAnswer[0]),Array.isArray(d)&&(c=p(d,e.value[u.value].correctAnswer)),e.value[u.value].isCorrect=c;const A=JSON.parse(JSON.stringify({isCorrect:c,userAlreadyAnswer:!0}));await x.updateQuestion(e.value[u.value].id,A),C.value=!0,o.value=c},h=()=>{l.value=!0,t.value=!0},N=()=>{l.value=!1,C.value=!1,T.value=!1,i.value=!1,u.value<e.value.length-1&&(u.value+=1)},T=m(!1),$=()=>{s.value=!0,i.value=!1},y=()=>{i.value===!1?i.value=!0:i.value=!1};return(d,c)=>e.value.length>0?(r(),_("div",St,[f(H,{mode:"out-in"},{default:v(()=>[s.value?(r(),_("div",Qt,[f(X,{goodCount:e.value.filter(A=>A.isCorrect).length,failCount:e.value.filter(A=>!A.isCorrect).length},null,8,["goodCount","failCount"])])):(r(),_("div",Nt,[e.value.length>0?(r(),_("div",qt,[a("div",Rt,[f(Y,{index:u.value,total:e.value.length,isShowTotal:!0},null,8,["index","total"])]),f(H,{name:"slide",mode:"out-in"},{default:v(()=>[(r(),_("div",{key:u.value,class:"container__exam"},[a("h3",null,b(e.value[u.value].question),1),a("div",Tt,[f(K,{onChange:c[0]||(c[0]=A=>T.value=!0),answerArr:e.value[u.value].answers,isRadio:e.value[u.value].correctAnswer.length===1,isConfirm:t.value,onUserSelect:k},null,8,["answerArr","isRadio","isConfirm"])]),l.value?(r(),_("div",Bt,[a("div",Vt,[o.value?(r(),_("p",Dt,"Вы ответили правильно")):(r(),_("p",It,"Вы ошиблись"))]),a("div",null,[f(ne,{onClick:y},{default:v(()=>c[2]||(c[2]=[w("Показать подсказку")])),_:1})])])):B("",!0),T.value?(r(),_("div",Ht,[f(H,{mode:"out-in"},{default:v(()=>[C.value?u.value!==e.value.length-1?(r(),_("div",Mt,[f(V,{onClick:c[1]||(c[1]=A=>s.value=!0)},{default:v(()=>c[4]||(c[4]=[w(" Закончить ")])),_:1}),f(V,{onClick:N},{default:v(()=>c[5]||(c[5]=[w(" Следующий вопрос ")])),_:1})])):(r(),O(V,{key:2,onClick:$},{default:v(()=>c[6]||(c[6]=[w("Результат")])),_:1})):(r(),O(V,{key:0,onClick:h},{default:v(()=>c[3]||(c[3]=[w(" Подтвердить выбор ")])),_:1}))]),_:1})])):B("",!0),a("div",Ot,[f(ae,{hit:e.value[u.value].hit,showHit:i.value},null,8,["hit","showHit"])])]))]),_:1})])):B("",!0)]))]),_:1})])):(r(),_("div",Ut,[a("div",Pt,[c[8]||(c[8]=a("h2",null,"Здесь будут отображаться вопросы в которых вы ошиблись",-1)),c[9]||(c[9]=a("h3",null,"Пока у вас нет ошибок",-1)),f(D(U),{to:"/"},{default:v(()=>[f(I,null,{default:v(()=>c[7]||(c[7]=[w("Вернуться в главное меню")])),_:1})]),_:1})])]))}},jt=q(Et,[["__scopeId","data-v-b38325e6"]]),Jt={class:"container"},Lt={class:"theme_name"},zt={class:"theme_counts"},Ft={class:"theme_total"},Gt={class:"theme_good"},Wt={class:"theme_fail"},Kt={class:"theme_btn"},Xt={__name:"ThemeCard",props:{theme:{type:Object,required:!0}},emits:["chooseTheme"],setup(n,{emit:e}){const t=n,s=e,o=()=>{s("chooseTheme",t.theme.name)};return(l,i)=>(r(),_("div",Jt,[a("div",Lt,b(n.theme.name),1),a("div",zt,[i[0]||(i[0]=a("hr",null,null,-1)),a("div",Ft," Количество вопросов: "+b(n.theme.questionTotal),1),a("div",Gt," Количество правильных ответов : "+b(n.theme.questionGood),1),a("div",Wt,"Количество ошибок: "+b(n.theme.questionFail),1)]),a("div",Kt,[f(I,{onClick:o},{default:v(()=>i[1]||(i[1]=[w("Тренироваться")])),_:1})])]))}},Yt=q(Xt,[["__scopeId","data-v-22a136b3"]]),Zt={class:"container"},es={class:"container__card"},ts={class:"container__btn"},ss={__name:"ThemePage",setup(n){const e=ue(),t=m([]);E(()=>{[...new Set(x.data.map(l=>l.theme))].forEach(l=>{t.value.push({name:l,questionTotal:x.data.filter(i=>i.theme===l).length,questionGood:x.data.filter(i=>i.theme===l&&i.userAlreadyAnswer===!0&&i.isCorrect===!0).length,questionFail:x.data.filter(i=>i.theme===l&&i.userAlreadyAnswer===!0&&i.isCorrect===!1).length})})});const s=o=>{e.push(`/theme/${encodeURIComponent(o)}`)};return(o,l)=>(r(),_("div",Zt,[a("div",es,[(r(!0),_(L,null,ee(t.value,(i,p)=>(r(),_("div",{key:p,class:F({"last-item":p===t.value.length-1&&t.value.length%2!==0})},[f(Yt,{theme:i,onChooseTheme:s},null,8,["theme"])],2))),128))]),a("div",ts,[f(D(U),{to:"/"},{default:v(()=>[f(I,null,{default:v(()=>l[0]||(l[0]=[w("Вернуться в меню")])),_:1})]),_:1})])]))}},os=q(ss,[["__scopeId","data-v-869f06e0"]]),ns={key:0},as={key:0},ls={key:0,class:"container"},rs={class:"container__progress-bar"},is={class:"container__exam-answers"},us={key:0,class:"container__hit"},ds={class:"container__hit-msg"},cs={key:0,class:"good"},fs={key:1,class:"fail"},vs={key:1,class:"navigation-buttons"},_s={key:1,class:"btns_next_menu"},hs={class:"container__hit"},ms={key:1},gs={key:1},ps={class:"container__empty"},ys={__name:"ThemeTraining",setup(n){const e=m([]),t=de(),s=m(!1),o=m(!1),l=m(null),i=m(!1),p=m(!1),u=m(0),C=m(!1),k=m(0),h=m(0);E(()=>{e.value=x.data.filter(S=>S.theme===t.params.theme)});const N=(S,g)=>{if(S.length!==g.length)return!1;const M=S.slice().sort(),Q=g.slice().sort();return M.every((P,z)=>P===Q[z])},T=async S=>{let g=!1;s.value=!1,Array.isArray(S)||(g=S===e.value[u.value].correctAnswer[0]),Array.isArray(S)&&(g=N(S,e.value[u.value].correctAnswer)),e.value[u.value].isCorrect=g;const M=JSON.parse(JSON.stringify({isCorrect:g,userAlreadyAnswer:!0}));await x.updateQuestion(e.value[u.value].id,M),C.value=!0,l.value=g,g?k.value+=1:h.value+=1},$=()=>{i.value=!0,s.value=!0},y=()=>{i.value=!1,C.value=!1,d.value=!1,p.value=!1,u.value<e.value.length-1&&(u.value+=1)},d=m(!1),c=()=>{o.value=!0,p.value=!1},A=()=>{p.value===!1?p.value=!0:p.value=!1};return(S,g)=>{const M=oe("RouterLink");return e.value.length>0?(r(),_("div",ns,[f(H,{mode:"out-in"},{default:v(()=>[o.value?(r(),_("div",ms,[f(X,{goodCount:k.value,failCount:h.value},null,8,["goodCount","failCount"])])):(r(),_("div",as,[e.value.length>0?(r(),_("div",ls,[a("div",rs,[f(Y,{index:u.value,total:e.value.length,isShowTotal:!0},null,8,["index","total"])]),f(H,{name:"slide",mode:"out-in"},{default:v(()=>[(r(),_("div",{key:u.value,class:"container__exam"},[a("h3",null,b(e.value[u.value].question),1),a("div",is,[f(K,{onChange:g[0]||(g[0]=Q=>d.value=!0),answerArr:e.value[u.value].answers,isRadio:e.value[u.value].correctAnswer.length===1,isConfirm:s.value,onUserSelect:T},null,8,["answerArr","isRadio","isConfirm"])]),i.value?(r(),_("div",us,[a("div",ds,[l.value?(r(),_("p",cs,"Вы ответили правильно")):(r(),_("p",fs,"Вы ошиблись"))]),a("div",null,[f(ne,{onClick:A},{default:v(()=>g[2]||(g[2]=[w("Показать подсказку")])),_:1})])])):B("",!0),d.value?(r(),_("div",vs,[f(H,{mode:"out-in"},{default:v(()=>[C.value?u.value!==e.value.length-1?(r(),_("div",_s,[f(V,{onClick:g[1]||(g[1]=Q=>o.value=!0)},{default:v(()=>g[4]||(g[4]=[w(" Закончить ")])),_:1}),f(V,{onClick:y},{default:v(()=>g[5]||(g[5]=[w(" Следующий вопрос ")])),_:1})])):(r(),O(V,{key:2,onClick:c},{default:v(()=>g[6]||(g[6]=[w("Результат")])),_:1})):(r(),O(V,{key:0,onClick:$},{default:v(()=>g[3]||(g[3]=[w(" Подтвердить выбор ")])),_:1}))]),_:1})])):B("",!0),a("div",hs,[f(ae,{hit:e.value[u.value].hit,showHit:p.value},null,8,["hit","showHit"])])]))]),_:1})])):B("",!0)]))]),_:1})])):(r(),_("div",gs,[a("div",ps,[g[8]||(g[8]=a("h2",null,"Здесь будут отображаться вопросы в которых вы ошиблись",-1)),g[9]||(g[9]=a("h3",null,"Пока у вас нет ошибок",-1)),f(M,{to:"/"},{default:v(()=>[f(I,null,{default:v(()=>g[7]||(g[7]=[w("Вернуться в главное меню")])),_:1})]),_:1})])]))}}},ws=q(ys,[["__scopeId","data-v-61909a94"]]),Cs=[{path:"/",component:Ne},{path:"/exam",component:tt},{path:"/marathon",component:ut},{path:"/statistic",component:Ct},{path:"/mistake",component:jt},{path:"/theme",component:os},{path:"/theme/:theme",component:ws}],ks=ce({history:fe("/Seti_test/"),routes:Cs}),As={__name:"App",setup(n){return(e,t)=>(r(),_(L,null,[a("div",null,[f(D(ve))]),t[0]||(t[0]=a("footer",null,null,-1))],64))}};ie(As).use(ks).mount("#app");
//# sourceMappingURL=index-SO3NGvec.js.map
